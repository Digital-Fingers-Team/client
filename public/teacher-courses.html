<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المقررات الدراسية - DT Edu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style> 
        :root {
            --primary: #4a6cf7;
            --primary-dark: #3a56d4;
            --secondary: #6c5ce7;
            --accent: #00b894;
            --light: #f8f9fa;
            --dark: #2d3436;
            --text: #333;
            --text-light: #666;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --sidebar-width: 260px;
        }

        .dark-mode {
            --light: #1a1a2e;
            --dark: #f8f9fa;
            --text: #e6e6e6;
            --text-light: #b0b0b0;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', 'Segoe UI', sans-serif;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #f0f8ff 0%, #e1f0fa 100%);
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            transition: var(--transition);
        }

        body.dark-mode {
            background: linear-gradient(135deg, #16213e 0%, #0f3460 100%);
        }

        body.rtl {
            direction: rtl;
        }

        body.ltr {
            direction: ltr;
        }

        /* التصميم الرئيسي */
        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }

        /* الشريط الجانبي */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(180deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 20px 0;
            box-shadow: var(--shadow);
            z-index: 100;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: var(--transition);
        }

        /* عندما تكون اللغة عربية */
        body.rtl .sidebar {
            right: 0;
        }

        body.rtl .main-content {
            margin-right: var(--sidebar-width);
        }

        /* عندما تكون اللغة إنجليزية */
        body.ltr .sidebar {
            left: 0;
        }

        body.ltr .main-content {
            margin-left: var(--sidebar-width);
            margin-right: 0;
        }

        .sidebar-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }

        .logo {
            width: 70px;
            height: 70px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .logo svg {
            width: 50px;
            height: 50px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(135deg, white, #e1f0fa);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-info {
            text-align: center;
            margin-top: 10px;
        }

        .user-name {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .user-type {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            display: inline-block;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0 15px;
            margin-bottom: 20px;
        }

        .menu-item {
            margin-bottom: 8px;
            border-radius: 10px;
            overflow: hidden;
        }

        .menu-item a {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: white;
            text-decoration: none;
            transition: var(--transition);
        }

        .menu-item a:hover,
        .menu-item.active a {
            background: rgba(255, 255, 255, 0.15);
        }

        body.rtl .menu-item a:hover,
        body.rtl .menu-item.active a {
            transform: translateX(-5px);
        }

        body.ltr .menu-item a:hover,
        body.ltr .menu-item.active a {
            transform: translateX(5px);
        }

        .menu-item i {
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        body.rtl .menu-item i {
            margin-left: 10px;
        }

        body.ltr .menu-item i {
            margin-right: 10px;
        }

        .menu-item span {
            flex: 1;
        }

        .sidebar-footer {
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: auto;
        }

        .sidebar-footer .menu-item a {
            padding: 10px 15px;
        }

        /* المحتوى الرئيسي */
        .main-content {
            flex: 1;
            padding: 20px;
            transition: var(--transition);
        }

        .header {
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }

        body.dark-mode .header {
            background: var(--light);
            color: var(--dark);
        }

        .header h1 {
            color: var(--primary);
            font-size: 28px;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .dark-mode-toggle,
        .back-btn,
        .filter-btn,
        .upload-btn {
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .dark-mode-toggle {
            background: rgba(74, 108, 247, 0.1);
            color: var(--primary);
        }

        .dark-mode-toggle:hover {
            background: rgba(74, 108, 247, 0.2);
        }

        .back-btn {
            background: rgba(108, 92, 231, 0.1);
            color: var(--secondary);
        }

        .back-btn:hover {
            background: rgba(108, 92, 231, 0.2);
        }

        .filter-btn {
            background: rgba(0, 184, 148, 0.1);
            color: var(--accent);
        }

        .filter-btn:hover {
            background: rgba(0, 184, 148, 0.2);
        }

        .upload-btn {
            background: var(--primary);
            color: white;
        }

        .upload-btn:hover {
            background: var(--primary-dark);
        }

        /* عناصر التحكم */
        .courses-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 20px;
            transition: var(--transition);
        }

        body.dark-mode .courses-controls {
            background: var(--light);
            color: var(--dark);
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border-radius: 10px;
            border: 1px solid #ddd;
            background: white;
            color: var(--text);
            font-size: 16px;
            transition: var(--transition);
        }

        body.dark-mode .search-input {
            background: var(--light);
            color: var(--dark);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.1);
        }

        .search-icon {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        body.rtl .search-icon {
            left: 15px;
        }

        body.ltr .search-icon {
            right: 15px;
        }

        .filter-options {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .filter-select {
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background: white;
            color: var(--text);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        body.dark-mode .filter-select {
            background: var(--light);
            color: var(--dark);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* شبكة المقررات */
        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .course-card {
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 0;
            transition: var(--transition);
            overflow: hidden;
            position: relative;
        }

        body.dark-mode .course-card {
            background: var(--light);
            color: var(--dark);
        }

        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .course-header {
            padding: 25px 25px 15px;
            position: relative;
        }

        .course-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            font-size: 24px;
            color: white;
        }

        body.rtl .course-icon {
            margin-left: 0;
        }

        body.ltr .course-icon {
            margin-right: 0;
        }

        .course-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text);
        }

        .course-classes {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .course-code {
            color: var(--text-light);
            font-size: 12px;
            background: rgba(0, 0, 0, 0.05);
            padding: 3px 8px;
            border-radius: 10px;
            display: inline-block;
        }

        body.dark-mode .course-code {
            background: rgba(255, 255, 255, 0.1);
        }

        .course-progress {
            margin-top: 15px;
        }

        .progress-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        body.dark-mode .progress-bar {
            background: rgba(255, 255, 255, 0.1);
        }

        .progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .progress-text {
            font-size: 12px;
            color: var(--text-light);
            display: flex;
            justify-content: space-between;
        }

        .course-content {
            padding: 0 25px 25px;
        }

        .course-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 15px 0;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
        }

        body.dark-mode .course-stats {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item {
            text-align: center;
            flex: 1;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 3px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-light);
        }

        .course-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .course-btn {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            font-size: 14px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: rgba(108, 92, 231, 0.1);
            color: var(--secondary);
        }

        .btn-secondary:hover {
            background: rgba(108, 92, 231, 0.2);
        }

        /* ألوان المواد */
        .math {
            background: linear-gradient(135deg, #4a6cf7, #6c5ce7);
        }

        .science {
            background: linear-gradient(135deg, #00b894, #00a085);
        }

        .arabic {
            background: linear-gradient(135deg, #fd79a8, #e84393);
        }

        .english {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
        }

        .history {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
        }

        .geography {
            background: linear-gradient(135deg, #81ecec, #00cec9);
        }

        .islamic {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
        }

        .art {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
        }

        .computer {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        /* إحصائيات المقررات */
        .courses-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 20px;
            display: flex;
            align-items: center;
            transition: var(--transition);
        }

        body.dark-mode .stat-card {
            background: var(--light);
            color: var(--dark);
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }

        body.rtl .stat-icon {
            margin-left: 15px;
        }

        body.ltr .stat-icon {
            margin-right: 15px;
        }

        .stat-info {
            flex: 1;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--text-light);
            font-size: 14px;
        }

        /* النوافذ المنبثقة */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
            animation: modalFadeIn 0.3s ease-out;
        }

        body.dark-mode .modal-content {
            background-color: var(--light);
            color: var(--dark);
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close-btn {
            position: absolute;
            top: 20px;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-light);
            transition: var(--transition);
        }

        body.rtl .close-btn {
            left: 25px;
        }

        body.ltr .close-btn {
            right: 25px;
        }

        .close-btn:hover {
            color: var(--text);
        }

        .modal-title {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
            font-size: 24px;
        }

        body.dark-mode .modal-title {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* نماذج الرفع */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: var(--transition);
            background-color: #f8f9fa;
        }

        body.dark-mode .form-group input,
        body.dark-mode .form-group textarea,
        body.dark-mode .form-group select {
            background-color: var(--light);
            color: var(--dark);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--primary);
            background-color: white;
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.2);
        }

        body.dark-mode .form-group input:focus,
        body.dark-mode .form-group textarea:focus,
        body.dark-mode .form-group select:focus {
            background-color: var(--light);
        }

        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-input-btn {
            display: block;
            padding: 12px 15px;
            background: rgba(74, 108, 247, 0.1);
            color: var(--primary);
            border: 2px dashed var(--primary);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .file-input-btn:hover {
            background: rgba(74, 108, 247, 0.2);
        }

        .submit-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .submit-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* قائمة الطلاب */
        .students-list {
            margin-top: 20px;
        }

        .student-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            transition: var(--transition);
        }

        body.dark-mode .student-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .student-item:hover {
            background: rgba(74, 108, 247, 0.05);
        }

        .student-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-left: 15px;
        }

        body.ltr .student-avatar {
            margin-right: 15px;
            margin-left: 0;
        }

        .student-info {
            flex: 1;
        }

        .student-name {
            font-weight: 600;
            color: var(--text);
        }

        .student-class {
            font-size: 12px;
            color: var(--text-light);
        }

        .watch-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .watched {
            color: var(--accent);
        }

        .not-watched {
            color: var(--text-light);
        }

        /* تقدم الرفع */
        .upload-progress {
            margin-top: 15px;
            display: none;
        }

        .progress-container {
            background: #e0e0e0;
            border-radius: 10px;
            height: 10px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-bar-upload {
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .progress-text-upload {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: var(--text-light);
        }

        /* قائمة الفيديوهات */
        .videos-list {
            margin-top: 20px;
        }

        .video-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 10px;
            background: rgba(74, 108, 247, 0.05);
            margin-bottom: 10px;
            transition: var(--transition);
        }

        body.dark-mode .video-item {
            background: rgba(255, 255, 255, 0.05);
        }

        .video-item:hover {
            background: rgba(74, 108, 247, 0.1);
        }

        .video-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            margin-left: 15px;
        }

        body.ltr .video-icon {
            margin-right: 15px;
            margin-left: 0;
        }

        .video-info {
            flex: 1;
        }

        .video-title {
            font-weight: 600;
            color: var(--text);
            margin-bottom: 5px;
        }

        .video-meta {
            display: flex;
            gap: 15px;
            font-size: 12px;
            color: var(--text-light);
        }

        .video-actions {
            display: flex;
            gap: 10px;
        }

        .video-btn {
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-view {
            background: rgba(0, 184, 148, 0.1);
            color: var(--accent);
        }

        .btn-view:hover {
            background: rgba(0, 184, 148, 0.2);
        }

        .btn-delete {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }

        .btn-delete:hover {
            background: rgba(231, 76, 60, 0.2);
        }

        /* مشغل الفيديو */
        .video-player-container {
            margin-top: 20px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .video-player {
            width: 100%;
            height: 400px;
            background: #000;
        }

        .video-details {
            padding: 15px;
            background: white;
        }

        body.dark-mode .video-details {
            background: var(--light);
        }

        .video-player-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text);
        }

        .video-player-meta {
            display: flex;
            justify-content: space-between;
            color: var(--text-light);
            font-size: 14px;
        }

        /* التصميم المتجاوب */
        @media (max-width: 992px) {
            .sidebar {
                width: 80px;
            }

            .sidebar-header .logo-text,
            .user-info,
            .menu-item span {
                display: none;
            }

            body.rtl .main-content {
                margin-right: 80px;
            }

            body.ltr .main-content {
                margin-left: 80px;
            }

            .menu-item a {
                justify-content: center;
                padding: 15px;
            }

            .menu-item i {
                margin: 0;
                font-size: 20px;
            }

            .sidebar-footer .menu-item span {
                display: none;
            }

            .courses-controls {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .search-box {
                max-width: 100%;
            }

            .filter-options {
                width: 100%;
                justify-content: space-between;
            }
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .header-actions {
                justify-content: center;
            }

            .courses-grid {
                grid-template-columns: 1fr;
            }

            .courses-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .course-actions {
                flex-direction: column;
            }

            .video-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .video-actions {
                align-self: flex-end;
            }

            .video-player {
                height: 300px;
            }
        }

        @media (max-width: 576px) {
            .main-content {
                padding: 15px;
            }

            .sidebar {
                width: 70px;
            }

            body.rtl .main-content {
                margin-right: 70px;
            }

            body.ltr .main-content {
                margin-left: 70px;
            }

            .courses-stats {
                grid-template-columns: 1fr;
            }

            .video-player {
                height: 250px;
            }
        }
    </style>
</head>

<body class="rtl">
    <div class="dashboard-container">
        <!-- الشريط الجانبي -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo">
                        <!-- الشعار داخل دائرة بيضاء -->
                        <svg width="50" height="50" viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#4a6cf7" />
                                    <stop offset="100%" stop-color="#00b894" />
                                </linearGradient>
                            </defs>
                            <circle cx="48" cy="48" r="46" fill="url(#grad)" opacity="0.15" stroke="#4a6cf7"
                                stroke-width="2" />
                            <path d="M28 62C28 48.745 38.745 38 52 38H60V46H52C43.163 46 36 53.163 36 62H28Z"
                                fill="#4a6cf7" />
                            <path d="M40 58C40 44.745 50.745 34 64 34H72V42H64C55.163 42 48 49.163 48 58H40Z"
                                fill="#00b894" opacity="0.85" />
                            <circle cx="60" cy="32" r="8" fill="#4a6cf7" opacity="0.75" />
                            <circle cx="36" cy="60" r="6" fill="#00b894" opacity="0.8" />
                        </svg>
                    </div>
                </div>
                <div class="logo-text">DT Edu</div>
                <div class="user-info">
                    <div class="user-name" id="user-name">أحمد المعلم</div>
                    <div class="user-type" id="user-type">مدرس</div>
                </div>
            </div>

            <ul class="sidebar-menu">
                <li class="menu-item">
                    <a href="teacher-dashboard.html">
                        <i class="fas fa-home"></i>
                        <span id="menu-dashboard">لوحة التحكم</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="teacher-schedule.html">
                        <i class="fas fa-calendar-alt"></i>
                        <span id="menu-schedule">الجدول الدراسي</span>
                    </a>
                </li>
                <li class="menu-item active">
                    <a href="teacher-courses.html">
                        <i class="fas fa-book"></i>
                        <span id="menu-courses">المقررات الدراسية</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="teacher-progress.html">
                        <i class="fas fa-chart-bar"></i>
                        <span id="menu-progress">التقدم الدراسي</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="teacher-messages.html">
                        <i class="fas fa-comments"></i>
                        <span id="menu-messages">الرسائل</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="teacher-settings.html">
                        <i class="fas fa-cog"></i>
                        <span id="menu-settings">الإعدادات</span>
                    </a>
                </li>
            </ul>

            <div class="sidebar-footer">
                <ul class="sidebar-menu">
                    <li class="menu-item">
                        <a href="#" id="sidebar-dark-mode-toggle">
                            <i class="fas fa-moon"></i>
                            <span id="dark-mode-text">الوضع الداكن</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" id="logout-link">
                            <i class="fas fa-sign-out-alt"></i>
                            <span id="logout-text">تسجيل الخروج</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- المحتوى الرئيسي -->
        <div class="main-content">
            <div class="header">
                <h1 id="header-title">المقررات الدراسية للمعلم - نظام DT Edu</h1>
                <div class="header-actions">
                    <button id="header-dark-mode-toggle" class="dark-mode-toggle">
                        <i class="fas fa-moon"></i>
                        <span id="dark-mode-btn-text">الوضع الداكن</span>
                    </button>
                    <button class="upload-btn" onclick="openUploadModal()">
                        <i class="fas fa-upload"></i>
                        <span id="upload-video-text">رفع فيديو</span>
                    </button>
                    <button id="back-btn" class="back-btn" onclick="goBack()">
                        <i class="fas fa-arrow-right"></i>
                        <span id="back-text">العودة</span>
                    </button>
                </div>
            </div>

            <!-- إحصائيات المقررات -->
            <div class="courses-stats">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4a6cf7, #6c5ce7);">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="total-courses">6</div>
                        <div class="stat-label" id="total-courses-label">إجمالي المقررات</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #00b894, #00a085);">
                        <i class="fas fa-video"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="total-videos">24</div>
                        <div class="stat-label" id="total-videos-label">فيديوهات مرفوعة</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #fd79a8, #e84393);">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="total-students">85</div>
                        <div class="stat-label" id="total-students-label">إجمالي الطلاب</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #fdcb6e, #e17055);">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="avg-views">78%</div>
                        <div class="stat-label" id="avg-views-label">متوسط المشاهدات</div>
                    </div>
                </div>
            </div>

            <!-- عناصر التحكم -->
            <div class="courses-controls">
                <div class="search-box">
                    <input type="text" class="search-input" id="course-search" placeholder="ابحث في المقررات...">
                    <i class="fas fa-search search-icon"></i>
                </div>
                <div class="filter-options">
                    <select class="filter-select" id="class-filter">
                        <option value="all">جميع الفصول</option>
                        <option value="10a">الصف العاشر - أ</option>
                        <option value="10b">الصف العاشر - ب</option>
                        <option value="11a">الصف الحادي عشر - أ</option>
                    </select>

                    <select class="filter-select" id="subject-filter">
                        <option value="all">جميع المواد</option>
                        <option value="math">الرياضيات</option>
                        <option value="science">العلوم</option>
                        <option value="arabic">اللغة العربية</option>
                    </select>
                </div>
            </div>

            <!-- شبكة المقررات -->
            <div class="courses-grid">
                <!-- مادة الرياضيات -->
                <div class="course-card">
                    <div class="course-header">
                        <div class="course-icon math">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <h3 class="course-title" id="math-title">الرياضيات</h3>
                        <p class="course-classes" id="math-classes">الصف العاشر - أ، الصف العاشر - ب</p>
                        <span class="course-code">MATH-701</span>

                        <div class="course-progress">
                            <div class="progress-bar">
                                <div class="progress-fill math" style="width: 85%"></div>
                            </div>
                            <div class="progress-text">
                                <span id="math-progress">85% مكتمل</span>
                                <span>12/14 وحدة</span>
                            </div>
                        </div>
                    </div>

                    <div class="course-content">
                        <div class="course-stats">
                            <div class="stat-item">
                                <div class="stat-value">8</div>
                                <div class="stat-label" id="math-videos">فيديوهات</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">75%</div>
                                <div class="stat-label" id="math-views">مشاهدات</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">32</div>
                                <div class="stat-label" id="math-students">طالب</div>
                            </div>
                        </div>

                        <div class="course-actions">
                            <button class="course-btn btn-primary" onclick="openCourse('math')">
                                <i class="fas fa-play"></i>
                                <span id="math-manage">إدارة المحتوى</span>
                            </button>
                            <button class="course-btn btn-secondary" onclick="viewStudents('math')">
                                <i class="fas fa-users"></i>
                                <span id="math-students-btn">متابعة الطلاب</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- مادة العلوم -->
                <div class="course-card">
                    <div class="course-header">
                        <div class="course-icon science">
                            <i class="fas fa-flask"></i>
                        </div>
                        <h3 class="course-title" id="science-title">العلوم</h3>
                        <p class="course-classes" id="science-classes">الصف العاشر - أ، الصف الحادي عشر - أ</p>
                        <span class="course-code">SCI-702</span>

                        <div class="course-progress">
                            <div class="progress-bar">
                                <div class="progress-fill science" style="width: 70%"></div>
                            </div>
                            <div class="progress-text">
                                <span id="science-progress">70% مكتمل</span>
                                <span>10/14 وحدة</span>
                            </div>
                        </div>
                    </div>

                    <div class="course-content">
                        <div class="course-stats">
                            <div class="stat-item">
                                <div class="stat-value">6</div>
                                <div class="stat-label" id="science-videos">فيديوهات</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">82%</div>
                                <div class="stat-label" id="science-views">مشاهدات</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">28</div>
                                <div class="stat-label" id="science-students">طالب</div>
                            </div>
                        </div>

                        <div class="course-actions">
                            <button class="course-btn btn-primary" onclick="openCourse('science')">
                                <i class="fas fa-play"></i>
                                <span id="science-manage">إدارة المحتوى</span>
                            </button>
                            <button class="course-btn btn-secondary" onclick="viewStudents('science')">
                                <i class="fas fa-users"></i>
                                <span id="science-students-btn">متابعة الطلاب</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- مادة اللغة العربية -->
                <div class="course-card">
                    <div class="course-header">
                        <div class="course-icon arabic">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <h3 class="course-title" id="arabic-title">اللغة العربية</h3>
                        <p class="course-classes" id="arabic-classes">الصف العاشر - ب، الصف الحادي عشر - أ</p>
                        <span class="course-code">AR-703</span>

                        <div class="course-progress">
                            <div class="progress-bar">
                                <div class="progress-fill arabic" style="width: 95%"></div>
                            </div>
                            <div class="progress-text">
                                <span id="arabic-progress">95% مكتمل</span>
                                <span>13/14 وحدة</span>
                            </div>
                        </div>
                    </div>

                    <div class="course-content">
                        <div class="course-stats">
                            <div class="stat-item">
                                <div class="stat-value">10</div>
                                <div class="stat-label" id="arabic-videos">فيديوهات</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">88%</div>
                                <div class="stat-label" id="arabic-views">مشاهدات</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">25</div>
                                <div class="stat-label" id="arabic-students">طالب</div>
                            </div>
                        </div>

                        <div class="course-actions">
                            <button class="course-btn btn-primary" onclick="openCourse('arabic')">
                                <i class="fas fa-play"></i>
                                <span id="arabic-manage">إدارة المحتوى</span>
                            </button>
                            <button class="course-btn btn-secondary" onclick="viewStudents('arabic')">
                                <i class="fas fa-users"></i>
                                <span id="arabic-students-btn">متابعة الطلاب</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- مادة اللغة الإنجليزية -->
                <div class="course-card">
                    <div class="course-header">
                        <div class="course-icon english">
                            <i class="fas fa-language"></i>
                        </div>
                        <h3 class="course-title" id="english-title">اللغة الإنجليزية</h3>
                        <p class="course-classes" id="english-classes">الصف العاشر - ب، الصف الحادي عشر - أ</p>
                        <span class="course-code">ENG-704</span>

                        <div class="course-progress">
                            <div class="progress-bar">
                                <div class="progress-fill english" style="width: 60%"></div>
                            </div>
                            <div class="progress-text">
                                <span id="english-progress">60% مكتمل</span>
                                <span>8/14 وحدة</span>
                            </div>
                        </div>
                    </div>

                    <div class="course-content">
                        <div class="course-stats">
                            <div class="stat-item">
                                <div class="stat-value">5</div>
                                <div class="stat-label" id="english-videos">فيديوهات</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">70%</div>
                                <div class="stat-label" id="english-views">مشاهدات</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">22</div>
                                <div class="stat-label" id="english-students">طالب</div>
                            </div>
                        </div>

                        <div class="course-actions">
                            <button class="course-btn btn-primary" onclick="openCourse('english')">
                                <i class="fas fa-play"></i>
                                <span id="english-manage">إدارة المحتوى</span>
                            </button>
                            <button class="course-btn btn-secondary" onclick="viewStudents('english')">
                                <i class="fas fa-users"></i>
                                <span id="english-students-btn">متابعة الطلاب</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- نافذة رفع الفيديو -->
    <div id="upload-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('upload-modal')">&times;</span>
            <h2 class="modal-title" id="upload-title">رفع فيديو تعليمي</h2>
            <div id="upload-content">
                <form id="upload-form">
                    <div class="form-group">
                        <label for="video-subject">المادة الدراسية</label>
                        <select id="video-subject" required>
                            <option value="">اختر المادة</option>
                            <option value="math">الرياضيات</option>
                            <option value="science">العلوم</option>
                            <option value="arabic">اللغة العربية</option>
                            <option value="english">الإنجليزية</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="video-class">الفصل الدراسي</label>
                        <select id="video-class" required>
                            <option value="">اختر الفصل</option>
                            <option value="10a">الصف العاشر - أ</option>
                            <option value="10b">الصف العاشر - ب</option>
                            <option value="11a">الصف الحادي عشر - أ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="video-title">عنوان الفيديو</label>
                        <input type="text" id="video-title" placeholder="أدخل عنوان الفيديو" required>
                    </div>
                    <div class="form-group">
                        <label for="video-description">وصف الفيديو</label>
                        <textarea id="video-description" rows="4" placeholder="أدخل وصف الفيديو"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="video-file">ملف الفيديو</label>
                        <div class="file-input-wrapper">
                            <div class="file-input-btn">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <span id="file-input-text">انقر لرفع ملف الفيديو (MP4, AVI, MOV)</span>
                            </div>
                            <input type="file" id="video-file" accept=".mp4,.avi,.mov" required>
                        </div>
                        <small id="video-file-name"
                            style="display: block; margin-top: 8px; color: var(--text-light);"></small>
                    </div>
                    <div class="upload-progress" id="upload-progress">
                        <div class="progress-container">
                            <div class="progress-bar-upload" id="progress-bar"></div>
                        </div>
                        <div class="progress-text-upload">
                            <span id="progress-percent">0%</span>
                            <span id="progress-status">جاري الرفع...</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="submit-btn" id="upload-submit-btn">
                            <i class="fas fa-upload"></i>
                            <span>رفع الفيديو</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- نافذة متابعة الطلاب -->
    <div id="students-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('students-modal')">&times;</span>
            <h2 class="modal-title" id="students-title">متابعة الطلاب - <span id="current-course"></span></h2>
            <div id="students-content">
                <div class="form-group">
                    <label for="video-select">اختر الفيديو:</label>
                    <select id="video-select">
                        <option value="">اختر الفيديو</option>
                        <!-- سيتم تعبئته بالجافاسكريبت -->
                    </select>
                </div>
                <div class="students-list" id="students-list">
                    <!-- سيتم تعبئته بالجافاسكريبت -->
                </div>
            </div>
        </div>
    </div>

    <!-- نافذة إدارة المحتوى -->
    <div id="content-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('content-modal')">&times;</span>
            <h2 class="modal-title" id="content-title">إدارة المحتوى - <span id="content-course"></span></h2>
            <div id="content-content">
                <div class="videos-list" id="videos-list">
                    <!-- سيتم تعبئته بالجافاسكريبت -->
                </div>
            </div>
        </div>
    </div>

    <!-- نافذة مشغل الفيديو -->
    <div id="player-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('player-modal')">&times;</span>
            <div class="video-player-container">
                <video class="video-player" id="video-player" controls>
                    <source id="video-source" src="" type="video/mp4">
                    متصفحك لا يدعم تشغيل الفيديو.
                </video>
                <div class="video-details">
                    <h3 class="video-player-title" id="player-title"></h3>
                    <div class="video-player-meta">
                        <span id="player-subject"></span>
                        <span id="player-date"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // استعادة اللغة المحفوظة
        let currentLanguage = localStorage.getItem('currentLanguage') || 'ar';

        // استعادة وضع التصميم المحفوظ
        let darkMode = localStorage.getItem('darkMode') === 'true';

        // تحديث اتجاه الصفحة واللغة والوضع الداكن
        document.body.className = currentLanguage === 'ar' ? 'rtl' : 'ltr';
        if (darkMode) {
            document.body.classList.add('dark-mode');
        }

        // إعداد زر الوضع الداكن
        document.querySelectorAll('#header-dark-mode-toggle, #sidebar-dark-mode-toggle').forEach(btn => {
            btn.addEventListener('click', function () {
                // تبديل الوضع الداكن
                darkMode = !darkMode;

                // تحديث الوضع الداكن في التخزين المحلي
                localStorage.setItem('darkMode', darkMode);

                // تحديث الوضع الداكن في الصفحة
                if (darkMode) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }

                // تحديث نص الزر
                updateDarkModeText();
            });
        });

        // إعداد زر تسجيل الخروج
        document.getElementById('logout-link').addEventListener('click', function (e) {
            e.preventDefault();
            localStorage.removeItem('currentUser');
            window.location.href = 'index.html';
        });

        // إعداد زر العودة
        function goBack() {
            window.location.href = 'teacher-dashboard.html';
        }

        // إعداد البحث
        document.getElementById('course-search').addEventListener('input', function () {
            const searchTerm = this.value.toLowerCase();
            const courseCards = document.querySelectorAll('.course-card');

            courseCards.forEach(card => {
                const title = card.querySelector('.course-title').textContent.toLowerCase();
                const classes = card.querySelector('.course-classes').textContent.toLowerCase();

                if (title.includes(searchTerm) || classes.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // بيانات المثال
        const students = [
            { id: 1, name: "محمد أحمد", class: "الصف العاشر - أ", watched: true },
            { id: 2, name: "أحمد محمود", class: "الصف العاشر - أ", watched: true },
            { id: 3, name: "سارة خالد", class: "الصف العاشر - أ", watched: false },
            { id: 4, name: "فاطمة علي", class: "الصف العاشر - أ", watched: true },
            { id: 5, name: "يوسف إبراهيم", class: "الصف العاشر - ب", watched: true },
            { id: 6, name: "خالد محمد", class: "الصف العاشر - ب", watched: false },
            { id: 7, name: "نورة سعيد", class: "الصف العاشر - ب", watched: true },
            { id: 8, name: "عمر حسن", class: "الصف الحادي عشر - أ", watched: true },
            { id: 9, name: "حسن عمر", class: "الصف الحادي عشر - أ", watched: false },
            { id: 10, name: "ليلى كمال", class: "الصف الحادي عشر - أ", watched: true }
        ];

        // تخزين الفيديوهات في localStorage
        let videos = JSON.parse(localStorage.getItem('teacherVideos')) || [
            {
                id: 1,
                title: "الدرس الأول: الجبر الأساسي",
                subject: "math",
                class: "10a",
                description: "شرح مفاهيم الجبر الأساسية والمعادلات البسيطة",
                fileName: "algebra_basics.mp4",
                uploadDate: "2023-10-15",
                views: 25,
                totalStudents: 32
            },
            {
                id: 2,
                title: "الدرس الثاني: المعادلات الخطية",
                subject: "math",
                class: "10a",
                description: "حل المعادلات الخطية بمتغير واحد",
                fileName: "linear_equations.mp4",
                uploadDate: "2023-10-20",
                views: 20,
                totalStudents: 32
            },
            {
                id: 3,
                title: "الدرس الأول: الخلايا الحيوية",
                subject: "science",
                class: "10a",
                description: "تعريف الخلايا وأنواعها ووظائفها",
                fileName: "cells.mp4",
                uploadDate: "2023-10-18",
                views: 22,
                totalStudents: 28
            },
            {
                id: 4,
                title: "الدرس الثاني: التركيب الضوئي",
                subject: "science",
                class: "11a",
                description: "عملية البناء الضوئي في النباتات",
                fileName: "photosynthesis.mp4",
                uploadDate: "2023-10-25",
                views: 18,
                totalStudents: 25
            },
            {
                id: 5,
                title: "الدرس الأول: النحو الأساسي",
                subject: "arabic",
                class: "10b",
                description: "أساسيات النحو العربي والإعراب",
                fileName: "grammar_basics.mp4",
                uploadDate: "2023-10-12",
                views: 30,
                totalStudents: 25
            },
            {
                id: 6,
                title: "الدرس الثاني: الإملاء",
                subject: "arabic",
                class: "11a",
                description: "قواعد الإملاء والكتابة الصحيحة",
                fileName: "spelling.mp4",
                uploadDate: "2023-10-22",
                views: 24,
                totalStudents: 25
            }
        ];

        // حفظ الفيديوهات في localStorage
        function saveVideos() {
            localStorage.setItem('teacherVideos', JSON.stringify(videos));
        }

        // وظائف فتح النوافذ المنبثقة
        function openUploadModal() {
            document.getElementById('upload-modal').style.display = 'flex';
            document.getElementById('upload-progress').style.display = 'none';
            document.getElementById('upload-submit-btn').disabled = false;
        }

        function openCourse(course) {
            document.getElementById('content-modal').style.display = 'flex';
            document.getElementById('content-course').textContent = getCourseName(course);
            loadVideosList(course);
        }

        function viewStudents(course) {
            document.getElementById('students-modal').style.display = 'flex';
            document.getElementById('current-course').textContent = getCourseName(course);
            loadStudentsList(course);
            loadVideoSelect(course);
        }

        function getCourseName(course) {
            const courseNames = {
                'math': currentLanguage === 'ar' ? 'الرياضيات' : 'Mathematics',
                'science': currentLanguage === 'ar' ? 'العلوم' : 'Science',
                'arabic': currentLanguage === 'ar' ? 'اللغة العربية' : 'Arabic',
                'english': currentLanguage === 'ar' ? 'اللغة الإنجليزية' : 'English'
            };

            return courseNames[course] || course;
        }

        // وظيفة إغلاق النوافذ المنبثقة
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            // إيقاف الفيديو عند إغلاق النافذة
            if (modalId === 'player-modal') {
                const videoPlayer = document.getElementById('video-player');
                videoPlayer.pause();
                videoPlayer.currentTime = 0;
            }
        }

        // إغلاق النوافذ المنبثقة عند النقر خارجها
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function (e) {
                if (e.target === this) {
                    this.style.display = 'none';
                    // إيقاف الفيديو عند إغلاق النافذة
                    if (this.id === 'player-modal') {
                        const videoPlayer = document.getElementById('video-player');
                        videoPlayer.pause();
                        videoPlayer.currentTime = 0;
                    }
                }
            });
        });

        // إعداد معالجات الملفات
        document.getElementById('video-file').addEventListener('change', function (e) {
            const file = e.target.files[0];
            if (file) {
                const fileName = file.name;
                const fileSize = (file.size / (1024 * 1024)).toFixed(2);
                document.getElementById('video-file-name').textContent = `${fileName} (${fileSize} MB)`;

                // التحقق من نوع الملف
                const allowedTypes = ['video/mp4', 'video/avi', 'video/quicktime'];
                if (!allowedTypes.includes(file.type)) {
                    alert('نوع الملف غير مدعوم. يرجى اختيار ملف فيديو (MP4, AVI, MOV)');
                    this.value = '';
                    document.getElementById('video-file-name').textContent = '';
                }
            } else {
                document.getElementById('video-file-name').textContent = 'لم يتم اختيار ملف';
            }
        });

        // إعداد نموذج رفع الفيديو
        document.getElementById('upload-form').addEventListener('submit', function (e) {
            e.preventDefault();

            const subject = document.getElementById('video-subject').value;
            const className = document.getElementById('video-class').value;
            const title = document.getElementById('video-title').value;
            const description = document.getElementById('video-description').value;
            const file = document.getElementById('video-file').files[0];

            if (!subject || !className || !title || !file) {
                alert('يرجى ملء جميع الحقول المطلوبة');
                return;
            }

            // عرض شريط التقدم
            document.getElementById('upload-progress').style.display = 'block';
            document.getElementById('upload-submit-btn').disabled = true;

            // محاكاة عملية الرفع
            simulateUpload(file, subject, className, title, description);
        });

        // محاكاة عملية رفع الفيديو
        function simulateUpload(file, subject, className, title, description) {
            const progressBar = document.getElementById('progress-bar');
            const progressPercent = document.getElementById('progress-percent');
            const progressStatus = document.getElementById('progress-status');

            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);

                    // إنشاء فيديو جديد
                    const newVideo = {
                        id: videos.length + 1,
                        title: title,
                        subject: subject,
                        class: className,
                        description: description,
                        fileName: file.name,
                        uploadDate: new Date().toISOString().split('T')[0],
                        views: 0,
                        totalStudents: getTotalStudents(className),
                        fileUrl: URL.createObjectURL(file) // إنشاء رابط مؤقت للفيديو
                    };

                    videos.push(newVideo);
                    saveVideos();

                    progressStatus.textContent = 'تم الرفع بنجاح!';

                    setTimeout(() => {
                        closeModal('upload-modal');
                        alert('تم رفع الفيديو بنجاح!');
                        updateCourseStats();
                    }, 1000);
                } else {
                    progressBar.style.width = progress + '%';
                    progressPercent.textContent = Math.round(progress) + '%';
                    progressStatus.textContent = 'جاري الرفع... ' + Math.round(progress) + '%';
                }
            }, 200);
        }

        // الحصول على عدد الطلاب في الفصل
        function getTotalStudents(className) {
            const classStudents = {
                '10a': 32,
                '10b': 28,
                '11a': 25
            };
            return classStudents[className] || 0;
        }

        // تحميل قائمة الفيديوهات
        function loadVideoSelect(course) {
            const videoSelect = document.getElementById('video-select');
            videoSelect.innerHTML = '<option value="">اختر الفيديو</option>';

            const courseVideos = videos.filter(video => video.subject === course);

            courseVideos.forEach(video => {
                const option = document.createElement('option');
                option.value = video.id;
                option.textContent = video.title;
                videoSelect.appendChild(option);
            });
        }

        // تحميل قائمة الطلاب
        function loadStudentsList(course) {
            const studentsList = document.getElementById('students-list');
            studentsList.innerHTML = '';

            // تصفية الطلاب حسب المادة (هذا مثال مبسط)
            const filteredStudents = students.filter(student =>
                student.class.includes(course === 'math' ? 'العاشر' :
                    course === 'science' ? 'العاشر' :
                        course === 'arabic' ? 'العاشر' : '')
            );

            filteredStudents.forEach(student => {
                const item = document.createElement('div');
                item.className = 'student-item';

                const firstLetter = student.name.split(' ')[0].charAt(0);

                item.innerHTML = `
                    <div class="student-avatar">${firstLetter}</div>
                    <div class="student-info">
                        <div class="student-name">${student.name}</div>
                        <div class="student-class">${student.class}</div>
                    </div>
                    <div class="watch-status ${student.watched ? 'watched' : 'not-watched'}">
                        <i class="fas ${student.watched ? 'fa-check-circle' : 'fa-clock'}"></i>
                        <span>${student.watched ? 'شاهد الفيديو' : 'لم يشاهد بعد'}</span>
                    </div>
                `;
                studentsList.appendChild(item);
            });
        }

        // تحميل قائمة الفيديوهات لإدارة المحتوى
        function loadVideosList(course) {
            const videosList = document.getElementById('videos-list');
            videosList.innerHTML = '';

            const courseVideos = videos.filter(video => video.subject === course);

            if (courseVideos.length === 0) {
                videosList.innerHTML = '<p style="text-align: center; color: var(--text-light);">لا توجد فيديوهات مرفوعة بعد</p>';
                return;
            }

            courseVideos.forEach(video => {
                const item = document.createElement('div');
                item.className = 'video-item';

                const viewPercentage = video.totalStudents > 0 ? Math.round((video.views / video.totalStudents) * 100) : 0;

                item.innerHTML = `
                    <div class="video-icon">
                        <i class="fas fa-play"></i>
                    </div>
                    <div class="video-info">
                        <div class="video-title">${video.title}</div>
                        <div class="video-meta">
                            <span>${getClassName(video.class)}</span>
                            <span>${video.uploadDate}</span>
                            <span>${viewPercentage}% مشاهدات</span>
                        </div>
                    </div>
                    <div class="video-actions">
                        <button class="video-btn btn-view" onclick="playVideo(${video.id})">
                            <i class="fas fa-play"></i>
                            <span>تشغيل</span>
                        </button>
                        <button class="video-btn btn-delete" onclick="deleteVideo(${video.id})">
                            <i class="fas fa-trash"></i>
                            <span>حذف</span>
                        </button>
                    </div>
                `;
                videosList.appendChild(item);
            });
        }

        // الحصول على اسم الفصل
        function getClassName(classCode) {
            const classNames = {
                '10a': 'الصف العاشر - أ',
                '10b': 'الصف العاشر - ب',
                '11a': 'الصف الحادي عشر - أ'
            };
            return classNames[classCode] || classCode;
        }

        // تشغيل الفيديو
        function playVideo(videoId) {
            const video = videos.find(v => v.id === videoId);
            if (video) {
                document.getElementById('player-modal').style.display = 'flex';
                document.getElementById('player-title').textContent = video.title;
                document.getElementById('player-subject').textContent = getCourseName(video.subject);
                document.getElementById('player-date').textContent = `تم الرفع: ${video.uploadDate}`;

                const videoPlayer = document.getElementById('video-player');
                const videoSource = document.getElementById('video-source');

                // استخدام رابط الفيديو المؤقت أو رابط افتراضي
                if (video.fileUrl) {
                    videoSource.src = video.fileUrl;
                } else {
                    // رابط افتراضي للفيديو (في التطبيق الحقيقي سيكون رابط الخادم)
                    videoSource.src = 'https://example.com/videos/' + video.fileName;
                }

                videoPlayer.load();

                // زيادة عدد المشاهدات
                video.views++;
                saveVideos();
                updateCourseStats();
            }
        }

        // حذف الفيديو
        function deleteVideo(videoId) {
            if (confirm('هل أنت متأكد من حذف هذا الفيديو؟')) {
                videos = videos.filter(v => v.id !== videoId);
                saveVideos();
                updateCourseStats();

                // إعادة تحميل قائمة الفيديوهات
                const currentCourse = document.getElementById('content-course').textContent;
                const courseCode = getCourseCode(currentCourse);
                loadVideosList(courseCode);

                alert('تم حذف الفيديو بنجاح');
            }
        }

        // الحصول على كود المادة من اسمها
        function getCourseCode(courseName) {
            const courseCodes = {
                'الرياضيات': 'math',
                'Mathematics': 'math',
                'العلوم': 'science',
                'Science': 'science',
                'اللغة العربية': 'arabic',
                'Arabic': 'arabic'
            };
            return courseCodes[courseName] || courseName;
        }

        // تحديث إحصائيات المقررات
        function updateCourseStats() {
            // تحديث إحصائيات الرياضيات
            const mathVideos = videos.filter(v => v.subject === 'math');
            const mathViews = mathVideos.reduce((sum, video) => sum + video.views, 0);
            const mathTotalStudents = mathVideos.reduce((sum, video) => sum + video.totalStudents, 0);
            const mathViewPercentage = mathTotalStudents > 0 ? Math.round((mathViews / mathTotalStudents) * 100) : 0;

            document.getElementById('math-videos').textContent = mathVideos.length;
            document.getElementById('math-views').textContent = mathViewPercentage + '%';

            // تحديث إحصائيات العلوم
            const scienceVideos = videos.filter(v => v.subject === 'science');
            const scienceViews = scienceVideos.reduce((sum, video) => sum + video.views, 0);
            const scienceTotalStudents = scienceVideos.reduce((sum, video) => sum + video.totalStudents, 0);
            const scienceViewPercentage = scienceTotalStudents > 0 ? Math.round((scienceViews / scienceTotalStudents) * 100) : 0;

            document.getElementById('science-videos').textContent = scienceVideos.length;
            document.getElementById('science-views').textContent = scienceViewPercentage + '%';

            // تحديث إحصائيات اللغة العربية
            const arabicVideos = videos.filter(v => v.subject === 'arabic');
            const arabicViews = arabicVideos.reduce((sum, video) => sum + video.views, 0);
            const arabicTotalStudents = arabicVideos.reduce((sum, video) => sum + video.totalStudents, 0);
            const arabicViewPercentage = arabicTotalStudents > 0 ? Math.round((arabicViews / arabicTotalStudents) * 100) : 0;

            document.getElementById('arabic-videos').textContent = arabicVideos.length;
            document.getElementById('arabic-views').textContent = arabicViewPercentage + '%';

            // تحديث الإحصائيات العامة
            document.getElementById('total-videos').textContent = videos.length;

            const totalViews = mathViews + scienceViews + arabicViews;
            const totalStudents = mathTotalStudents + scienceTotalStudents + arabicTotalStudents;
            const avgViewPercentage = totalStudents > 0 ? Math.round((totalViews / totalStudents) * 100) : 0;

            document.getElementById('avg-views').textContent = avgViewPercentage + '%';
        }

        // تحديث قائمة الطلاب عند تغيير الفيديو
        document.getElementById('video-select').addEventListener('change', function () {
            // في التطبيق الحقيقي، سيتم تحميل بيانات مختلفة حسب الفيديو المختار
            // هنا سنستخدم نفس البيانات للمثال
        });

        // تحديث النصوص حسب اللغة الحالية
        function updateLanguage() {
            const translations = {
                'ar': {
                    'header-title': 'المقررات الدراسية للمعلم - نظام DT Edu',
                    'menu-dashboard': 'لوحة التحكم',
                    'menu-schedule': 'الجدول الدراسي',
                    'menu-courses': 'المقررات الدراسية',
                    'menu-progress': 'التقدم الدراسي',
                    'menu-messages': 'الرسائل',
                    'menu-settings': 'الإعدادات',
                    'total-courses-label': 'إجمالي المقررات',
                    'total-videos-label': 'فيديوهات مرفوعة',
                    'total-students-label': 'إجمالي الطلاب',
                    'avg-views-label': 'متوسط المشاهدات',
                    'math-title': 'الرياضيات',
                    'math-classes': 'الصف العاشر - أ، الصف العاشر - ب',
                    'math-progress': '85% مكتمل',
                    'math-videos': 'فيديوهات',
                    'math-views': 'مشاهدات',
                    'math-students': 'طالب',
                    'math-manage': 'إدارة المحتوى',
                    'math-students-btn': 'متابعة الطلاب',
                    'science-title': 'العلوم',
                    'science-classes': 'الصف العاشر - أ، الصف الحادي عشر - أ',
                    'science-progress': '70% مكتمل',
                    'science-videos': 'فيديوهات',
                    'science-views': 'مشاهدات',
                    'science-students': 'طالب',
                    'science-manage': 'إدارة المحتوى',
                    'science-students-btn': 'متابعة الطلاب',
                    'arabic-title': 'اللغة العربية',
                    'arabic-classes': 'الصف العاشر - ب، الصف الحادي عشر - أ',
                    'arabic-progress': '95% مكتمل',
                    'arabic-videos': 'فيديوهات',
                    'arabic-views': 'مشاهدات',
                    'arabic-students': 'طالب',
                    'arabic-manage': 'إدارة المحتوى',
                    'arabic-students-btn': 'متابعة الطلاب',
                    'upload-video-text': 'رفع فيديو',
                    'upload-title': 'رفع فيديو تعليمي',
                    'students-title': 'متابعة الطلاب - ',
                    'content-title': 'إدارة المحتوى - ',
                    'file-input-text': 'انقر لرفع ملف الفيديو (MP4, AVI, MOV)',
                    'logout-text': 'تسجيل الخروج',
                    'dark-mode-text': 'الوضع الداكن',
                    'dark-mode-btn-text': 'الوضع الداكن',
                    'back-text': 'العودة'
                },
                'en': {
                    'header-title': 'Teacher Courses - DT Edu System',
                    'menu-dashboard': 'Dashboard',
                    'menu-schedule': 'Schedule',
                    'menu-courses': 'Courses',
                    'menu-progress': 'Progress',
                    'menu-messages': 'Messages',
                    'menu-settings': 'Settings',
                    'total-courses-label': 'Total Courses',
                    'total-videos-label': 'Uploaded Videos',
                    'total-students-label': 'Total Students',
                    'avg-views-label': 'Average Views',
                    'math-title': 'Mathematics',
                    'math-classes': 'Grade 10 - A, Grade 10 - B',
                    'math-progress': '85% Complete',
                    'math-videos': 'Videos',
                    'math-views': 'Views',
                    'math-students': 'Students',
                    'math-manage': 'Manage Content',
                    'math-students-btn': 'Track Students',
                    'science-title': 'Science',
                    'science-classes': 'Grade 10 - A, Grade 11 - A',
                    'science-progress': '70% Complete',
                    'science-videos': 'Videos',
                    'science-views': 'Views',
                    'science-students': 'Students',
                    'science-manage': 'Manage Content',
                    'science-students-btn': 'Track Students',
                    'arabic-title': 'Arabic',
                    'arabic-classes': 'Grade 10 - B, Grade 11 - A',
                    'arabic-progress': '95% Complete',
                    'arabic-videos': 'Videos',
                    'arabic-views': 'Views',
                    'arabic-students': 'Students',
                    'arabic-manage': 'Manage Content',
                    'arabic-students-btn': 'Track Students',
                    'upload-video-text': 'Upload Video',
                    'upload-title': 'Upload Educational Video',
                    'students-title': 'Track Students - ',
                    'content-title': 'Manage Content - ',
                    'file-input-text': 'Click to upload video file (MP4, AVI, MOV)',
                    'logout-text': 'Logout',
                    'dark-mode-text': 'Dark Mode',
                    'dark-mode-btn-text': 'Dark Mode',
                    'back-text': 'Back'
                }
            };

            // تطبيق الترجمات
            Object.keys(translations[currentLanguage]).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = translations[currentLanguage][key];
                }
            });

            // تحديث placeholder في البحث
            document.getElementById('course-search').placeholder =
                currentLanguage === 'ar' ? 'ابحث في المقررات...' : 'Search courses...';
        }

        // تحديث نص زر الوضع الداكن
        function updateDarkModeText() {
            const darkModeText = currentLanguage === 'ar'
                ? (darkMode ? 'الوضع الفاتح' : 'الوضع الداكن')
                : (darkMode ? 'Light Mode' : 'Dark Mode');

            document.getElementById('dark-mode-text').textContent = darkModeText;
            document.getElementById('dark-mode-btn-text').textContent = darkModeText;

            // تحديث الأيقونة
            const icons = document.querySelectorAll('#header-dark-mode-toggle i, #sidebar-dark-mode-toggle i');
            icons.forEach(icon => {
                icon.className = darkMode ? 'fas fa-sun' : 'fas fa-moon';
            });
        }

        // تحديث اتجاه القائمة حسب اللغة
        function updateSidebarPosition() {
            const sidebar = document.querySelector('.sidebar');
            const mainContent = document.querySelector('.main-content');

            if (currentLanguage === 'ar') {
                sidebar.style.right = '0';
                sidebar.style.left = 'auto';
                mainContent.style.marginRight = 'var(--sidebar-width)';
                mainContent.style.marginLeft = '0';
            } else {
                sidebar.style.left = '0';
                sidebar.style.right = 'auto';
                mainContent.style.marginLeft = 'var(--sidebar-width)';
                mainContent.style.marginRight = '0';
            }
        }

        // تحديث اتجاه زر العودة
        function updateBackButton() {
            const backIcon = document.querySelector('#back-btn i');
            if (currentLanguage === 'ar') {
                backIcon.className = 'fas fa-arrow-right';
            } else {
                backIcon.className = 'fas fa-arrow-left';
            }
        }

        // تحديث اتجاه أيقونة البحث
        function updateSearchIcon() {
            const searchIcon = document.querySelector('.search-icon');
            if (currentLanguage === 'ar') {
                searchIcon.style.left = '15px';
                searchIcon.style.right = 'auto';
            } else {
                searchIcon.style.right = '15px';
                searchIcon.style.left = 'auto';
            }
        }

        // تحديث اللغة والوضع الداكن عند تحميل الصفحة
        updateLanguage();
        updateDarkModeText();
        updateSidebarPosition();
        updateBackButton();
        updateSearchIcon();
        updateCourseStats();
    </script>
</body>

</html>